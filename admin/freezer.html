<!-- ============================================================
FIL: admin/freezer.html  (NY HEL FIL)
Projekt: Lager/Freezer (UI-only / localStorage-first)

M√•l:
- Modern admin-startsida (Fortnox-k√§nsla): sidomeny + topbar + kortlayout
- Beh√•ll kompatibla DOM-id/hookar f√∂r befintlig JS:
  - frzStatusText, frzRoleText, frzUserName, frzOpenCreateUserBtn, frzResetDemoBtn
  - tabDashboard/tabSaldo/tabHistorik + viewDashboard/viewSaldo/viewHistorik
  - frzDashCards, frzDashNotes
  - frzUsersPanel, frzUsersList, frzUsersCount, frzUsersInlineMsg*
  - frzSaldoTableWrap, frzSaldoCount
  - frzHistoryList, frzHistoryCount
  - freezerViewMenu, freezerViewRoot (router hooks)
  - frzUserModalOverlay + legacy modal ids

P0 FIX:
- .modalOverlay[hidden]{ display:none !important; } (modal f√•r aldrig l√•sa sidan)

POLICY:
- UI-only
- Inga nya storage-keys/datamodell
- XSS-safe (render sker i JS via textContent)
============================================================ -->
<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Freezer ‚Äì Admin</title>
  <link rel="icon" href="data:,">

  <style>
    :root{
      color-scheme: light;
      --bg: #f6f7f8;
      --card: #ffffff;
      --card2:#fafafa;
      --line:#e6e6e6;
      --text:#0f172a;
      --muted: rgba(15,23,42,.72);
      --shadow: 0 12px 35px rgba(2,6,23,.08);
      --r12: 12px;
      --r14: 14px;
      --r18: 18px;
      --r999: 999px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    /* App layout */
    .frzApp{
      min-height:100vh;
      display:grid;
      grid-template-columns: 280px 1fr;
    }
    @media (max-width: 980px){
      .frzApp{ grid-template-columns: 1fr; }
      .frzSidebar{ position: sticky; top:0; z-index: 50; }
    }

    /* Sidebar */
    .frzSidebar{
      background: #0b1220;
      color: #e5e7eb;
      border-right: 1px solid rgba(255,255,255,.06);
      padding: 14px;
    }
    .frzSideTop{
      display:flex; align-items:center; gap:10px;
      padding: 10px 10px 12px 10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      margin-bottom: 12px;
    }
    .frzLogo{
      width:34px; height:34px; border-radius: 10px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.10);
      font-weight:800;
    }
    .frzSideBrand{ font-weight:900; letter-spacing:.2px; }
    .frzSideSub{ font-size:12px; opacity:.75; margin-top:2px; }

    .frzNav{
      display:flex; flex-direction:column; gap:8px;
      padding: 12px 0;
    }
    .frzNavBtn{
      width:100%;
      text-align:left;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color:#e5e7eb;
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
      display:flex; align-items:center; gap:10px;
    }
    .frzNavBtn:hover{ background: rgba(255,255,255,.10); }
    .frzNavBtn[aria-current="page"]{
      background: rgba(255,255,255,.16);
      border-color: rgba(255,255,255,.18);
      font-weight:800;
    }
    .frzNavIcon{
      width:28px; height:28px; border-radius: 10px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.10);
      font-size: 14px;
    }
    .frzSideCard{
      margin-top: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      border-radius: 14px;
      padding: 12px;
    }
    .frzSideCard b{ display:block; }
    .frzSideCard .muted{ opacity:.75; font-size:12px; }

    /* Main */
    .frzMain{
      display:flex;
      flex-direction:column;
      min-width:0;
    }

    /* Topbar */
    header{
      background: var(--card);
      border-bottom: 1px solid var(--line);
      position: sticky; top:0; z-index: 40;
    }
    .wrap{
      max-width: 1220px;
      margin: 0 auto;
      padding: 12px 16px;
    }
    .topRow{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }
    .crumb{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      font-weight:800;
    }
    .crumb a{ color:inherit; text-decoration:none; opacity:.8; font-weight:700; }
    .crumb a:hover{ opacity:1; }
    .crumb .muted{ opacity:.65; font-weight:700; }
    .spacer{ flex:1; }

    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:6px 10px;
      border-radius: var(--r999);
      border:1px solid var(--line);
      background: var(--card2);
      font-size: 13px;
      white-space: nowrap;
    }
    .pill b{ font-weight:800; }
    .muted{ color: var(--muted); }
    .btn{
      border:1px solid var(--line);
      background: var(--card);
      border-radius: 12px;
      padding: 9px 12px;
      cursor:pointer;
      font-weight:700;
    }
    .btn:hover{ background:#f9fafb; }
    .btn[disabled]{ opacity:.55; cursor:not-allowed; }

    /* Content shell */
    main{ padding: 16px 0 26px; }
    .content{
      max-width: 1220px;
      margin: 0 auto;
      padding: 0 16px;
    }

    /* Tabs row (kept for JS hooks) */
    .tabsRow{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      margin-bottom: 12px;
    }
    .tabs{
      display:flex; gap:8px; flex-wrap:wrap;
      padding: 6px;
      border:1px solid var(--line);
      background: var(--card);
      border-radius: 14px;
      box-shadow: 0 1px 0 rgba(2,6,23,.02);
    }
    .tabBtn{
      border:1px solid transparent;
      background: transparent;
      border-radius: var(--r999);
      padding: 8px 12px;
      cursor:pointer;
      font-size: 14px;
      font-weight: 700;
      color: rgba(15,23,42,.85);
    }
    .tabBtn[aria-selected="true"]{
      background: #f3f4f6;
      border-color: #e5e7eb;
      font-weight: 900;
    }

    /* Cards */
    .panel{
      border:1px solid var(--line);
      background: var(--card);
      border-radius: var(--r18);
      padding: 14px;
      box-shadow: var(--shadow);
    }
    .panel.flat{ box-shadow:none; }
    .danger{ border-color:#f2b8b5; background:#fff5f5; }
    .warn{ border-color:#f2b8b5; background:#fff5f5; }

    .grid2{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 980px){
      .grid2{ grid-template-columns: 1.15fr .85fr; }
    }
    .grid3{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 980px){
      .grid3{ grid-template-columns: 1fr 1fr 1fr; }
    }

    .card{
      border:1px solid var(--line);
      background: var(--card);
      border-radius: var(--r18);
      padding: 14px;
      box-shadow: var(--shadow);
      min-height: 94px;
    }
    .cardHead{
      display:flex; align-items:center; gap:10px;
      margin-bottom: 8px;
    }
    .cardIcon{
      width:40px; height:40px;
      border-radius: 14px;
      display:grid; place-items:center;
      background: #f3f4f6;
      border:1px solid #e5e7eb;
      font-weight:900;
    }
    .cardTitle{ font-weight:900; }
    .cardText{ color: var(--muted); font-size: 13px; line-height: 1.35; }

    .hr{ height:1px; background:#eee; margin: 14px 0; }

    /* Users list styling (kept) */
    .list{ display:flex; flex-direction:column; gap:8px; }
    .userRow{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      padding: 10px;
      border:1px solid var(--line);
      border-radius: 14px;
      background: var(--card);
    }
    .userRow .name{ font-weight:900; }
    .userRow .meta{ font-size:12px; color: var(--muted); }

    /* Modal */
    .modalOverlay{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.35);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 9999;
    }
    .modalCard{
      width: min(720px, 100%);
      border-radius: 18px;
      border: 1px solid var(--line);
      background: var(--card);
      box-shadow: 0 20px 60px rgba(0,0,0,.18);
      overflow:hidden;
    }
    .modalHead{
      display:flex; align-items:center; gap:10px;
      padding: 12px 14px;
      border-bottom:1px solid #eee;
      background: #fcfcfd;
    }
    .modalBody{ padding: 14px; }
    .modalFoot{
      display:flex; align-items:center; gap:10px;
      padding: 12px 14px;
      border-top:1px solid #eee;
      justify-content:flex-end;
      background: #fcfcfd;
    }
    .modalTitle{ font-weight:900; margin:0; }
    .iconBtn{
      border:1px solid var(--line);
      background: var(--card);
      border-radius: 12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:800;
    }
    .srOnly{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }

    /* P0 FIX: hidden m√•ste vinna */
    .modalOverlay[hidden]{ display:none !important; }

    /* Small helpers */
    .kpi{
      display:flex; align-items:baseline; justify-content:space-between; gap:10px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: var(--card2);
    }
    .kpi .label{ font-size: 12px; color: var(--muted); font-weight:700; }
    .kpi .value{ font-size: 18px; font-weight: 950; letter-spacing:-.2px; }
    .kpi .sub{ font-size: 12px; color: var(--muted); }

    footer{ padding: 10px 0; color: var(--muted); font-size: 12px; }
  </style>
</head>

<body>
  <div class="frzApp">

    <!-- SIDEBAR -->
    <aside class="frzSidebar">
      <div class="frzSideTop">
        <div class="frzLogo">üßä</div>
        <div>
          <div class="frzSideBrand">Freezer</div>
          <div class="frzSideSub">Admin ‚Ä¢ Fryslager</div>
        </div>
      </div>

      <div class="frzNav" aria-label="Huvudmeny">
        <!-- Dessa triggar befintliga tab-knappar (se inline script l√§ngst ner) -->
        <button class="frzNavBtn" type="button" data-frz-tab="dashboard" aria-current="page">
          <span class="frzNavIcon">üè†</span>
          <span>Startsida</span>
        </button>
        <button class="frzNavBtn" type="button" data-frz-tab="saldo">
          <span class="frzNavIcon">üì¶</span>
          <span>Saldo</span>
        </button>
        <button class="frzNavBtn" type="button" data-frz-tab="history">
          <span class="frzNavIcon">üßæ</span>
          <span>Historik</span>
        </button>
      </div>

      <div class="frzSideCard">
        <b>Snabbinfo</b>
        <div class="muted" style="margin-top:6px;">
          Detta √§r en UI-only demo. Beh√∂righeter styr knappar och paneler.
        </div>
        <div class="muted" style="margin-top:8px;">
          Tips: Om n√•got k√§nns ‚Äúl√•st‚Äù ‚Äì testa <b>√Öterst√§ll demo</b>.
        </div>
      </div>

      <div class="frzSideCard" style="margin-top:10px;">
        <b>Router</b>
        <div class="muted" style="margin-top:6px;">
          Meny/Root kopplas av JS h√§r:
        </div>
        <div class="muted" style="margin-top:6px;">
          <code style="opacity:.9;">#freezerViewMenu</code><br/>
          <code style="opacity:.9;">#freezerViewRoot</code>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <section class="frzMain">

      <!-- TOPBAR -->
      <header>
        <div class="wrap">
          <div class="topRow">
            <div class="crumb">
              <span style="font-size:18px;">Freezer</span>
              <span class="muted">Admin Hem</span>
              <span class="muted">/</span>
              <a href="./freezer.html"><b>Fryslager</b></a>
            </div>

            <div class="spacer"></div>

            <div id="frzStatusPill" class="pill" role="status" aria-live="polite">
              <span class="muted">Status:</span>
              <b id="frzStatusText">Laddar‚Ä¶</b>
            </div>

            <div class="pill" title="Roll styrs av inloggning">
              <span class="muted">Roll:</span>
              <b id="frzRoleText">ADMIN</b>
            </div>

            <div class="pill" title="Inloggad anv√§ndare">
              <span class="muted">Anv√§ndare:</span>
              <b id="frzUserName">‚Äî</b>
            </div>

            <button id="frzOpenCreateUserBtn" class="btn" type="button" title="Skapa ny anv√§ndare (√∂ppnar modal)" disabled>
              Skapa anv√§ndare
            </button>

            <button id="frzResetDemoBtn" class="btn" type="button" title="√Öterst√§ll demo-data (endast om ej read-only)">
              √Öterst√§ll demo
            </button>
          </div>
        </div>
      </header>

      <main>
        <div class="content">

          <!-- Lock / debug (hooks) -->
          <section id="frzLockPanel" class="panel danger flat" hidden>
            <div style="display:flex; gap:10px; align-items:flex-start; flex-wrap:wrap;">
              <div>
                <b>Import stoppad / L√•st l√§ge</b>
                <div class="muted" id="frzLockReason">Orsak: ok√§nd</div>
              </div>
            </div>
          </section>

          <section id="frzDebugPanel" class="panel flat" hidden style="margin-top:12px;">
            <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
              <b>Debug</b>
              <div class="spacer"></div>
              <div class="muted" id="frzDebugText">‚Äî</div>
            </div>
          </section>

          <!-- Tabs + hint + mode -->
          <div class="tabsRow" style="margin-top:12px;">
            <div class="tabs" role="tablist" aria-label="Vy">
              <button id="tabDashboard" class="tabBtn" type="button" role="tab" aria-selected="true" aria-controls="viewDashboard">Dashboard</button>
              <button id="tabSaldo" class="tabBtn" type="button" role="tab" aria-selected="false" aria-controls="viewSaldo">Saldo</button>
              <button id="tabHistorik" class="tabBtn" type="button" role="tab" aria-selected="false" aria-controls="viewHistorik">Historik</button>
            </div>

            <div id="frzViewHint" class="muted" style="font-size:13px;">‚Äî</div>

            <div class="spacer"></div>

            <div class="pill" title="Visar om sidan √§r read-only">
              <span class="muted">L√§ge:</span>
              <b id="frzModeText">‚Äî</b>
            </div>
          </div>

          <!-- Router hooks (kept) -->
          <section class="panel flat" style="margin-bottom:12px;">
            <div id="freezerViewMenu" class="tabs" aria-label="Router-meny"></div>
            <div id="freezerViewRoot" style="margin-top:10px;"></div>
          </section>

          <!-- DASHBOARD -->
          <section id="viewDashboard" class="panel" role="tabpanel" aria-labelledby="tabDashboard">
            <div class="grid2">

              <!-- LEFT: main dashboard -->
              <div>
                <div class="panel flat" style="padding:0; background:transparent; border:none; box-shadow:none;">
                  <div class="grid3">
                    <div class="card">
                      <div class="cardHead">
                        <div class="cardIcon">üìä</div>
                        <div>
                          <div class="cardTitle">√ñversikt</div>
                          <div class="cardText">Snabb status f√∂r ink√∂p/admin.</div>
                        </div>
                      </div>
                      <div class="kpi">
                        <div>
                          <div class="label">Saldo (indikativt)</div>
                          <div class="value" id="frzKpiSaldo">‚Äî</div>
                          <div class="sub">uppdateras av render</div>
                        </div>
                        <div class="muted">üì¶</div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="cardHead">
                        <div class="cardIcon">üßæ</div>
                        <div>
                          <div class="cardTitle">H√§ndelser</div>
                          <div class="cardText">Senaste r√∂relser och historik.</div>
                        </div>
                      </div>
                      <div class="kpi">
                        <div>
                          <div class="label">Historik (antal)</div>
                          <div class="value" id="frzKpiHistory">‚Äî</div>
                          <div class="sub">senaste period</div>
                        </div>
                        <div class="muted">‚è±Ô∏è</div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="cardHead">
                        <div class="cardIcon">‚úÖ</div>
                        <div>
                          <div class="cardTitle">Att g√∂ra</div>
                          <div class="cardText">Snabba √•tg√§rder f√∂r admin.</div>
                        </div>
                      </div>
                      <div class="cardText">
                        ‚Ä¢ L√§gg upp artiklar<br/>
                        ‚Ä¢ Kontrollera uttag<br/>
                        ‚Ä¢ Skapa anv√§ndare (om beh√∂righet)
                      </div>
                    </div>
                  </div>

                  <div class="hr"></div>

                  <!-- frzDashCards anv√§nds av render/JS f√∂r att injicera kort + Top IN/OUT panel -->
                  <div id="frzDashCards" class="grid2"></div>
                </div>

                <div class="hr"></div>

                <!-- USERS PANEL (hook) -->
                <section id="frzUsersPanel" class="panel" hidden>
                  <div style="display:flex; gap:10px; align-items:flex-start; flex-wrap:wrap;">
                    <div>
                      <h2 style="margin:0;">Anv√§ndare & beh√∂righeter</h2>
                      <div class="muted" style="margin-top:4px;">
                        Skapa/√§ndra anv√§ndare g√∂rs via <b>Skapa anv√§ndare</b> i topbaren.
                      </div>
                    </div>
                    <div class="spacer"></div>
                    <div class="pill" title="Antal anv√§ndare (inkl inaktiva)">
                      <span class="muted">Users:</span>
                      <b id="frzUsersCount">0</b>
                    </div>
                  </div>

                  <div class="hr"></div>

                  <div id="frzUsersInlineMsg" class="panel warn flat" hidden>
                    <b id="frzUsersInlineMsgTitle">Info</b>
                    <div class="muted" id="frzUsersInlineMsgText">‚Äî</div>
                  </div>

                  <div class="list" id="frzUsersList" aria-label="Users list"></div>
                </section>
              </div>

              <!-- RIGHT: notes + company/status -->
              <div>
                <div class="card">
                  <div class="cardHead">
                    <div class="cardIcon">üè¢</div>
                    <div>
                      <div class="cardTitle">F√∂retaget</div>
                      <div class="cardText">Status, notiser och admininfo.</div>
                    </div>
                  </div>
                  <div class="kpi">
                    <div>
                      <div class="label">Systeml√§ge</div>
                      <div class="value" id="frzCompanyMode">‚Äî</div>
                      <div class="sub">read-only / l√•s / ok</div>
                    </div>
                    <div class="muted">üõ°Ô∏è</div>
                  </div>
                  <div class="cardText" style="margin-top:10px;">
                    Beh√∂righeter styr vad som √§r klickbart. Om ‚ÄúSkapa anv√§ndare‚Äù √§r gr√• ‚Üí saknar du r√§ttighet eller sidan √§r l√•st/read-only.
                  </div>
                </div>

                <div style="height:12px;"></div>

                <div class="card">
                  <div class="cardHead">
                    <div class="cardIcon">üìù</div>
                    <div>
                      <div class="cardTitle">Noteringar</div>
                      <div class="cardText">Interna anteckningar (stub).</div>
                    </div>
                  </div>
                  <div class="muted" id="frzDashNotes">‚Äî</div>
                </div>

                <div style="height:12px;"></div>

                <div class="card">
                  <div class="cardHead">
                    <div class="cardIcon">üí°</div>
                    <div>
                      <div class="cardTitle">Insikter</div>
                      <div class="cardText">Tips och kommande h√§ndelser.</div>
                    </div>
                  </div>
                  <div class="cardText">
                    ‚Ä¢ √ñppna <b>Historik</b> f√∂r att se senaste IN/OUT.<br/>
                    ‚Ä¢ √ñppna <b>Saldo</b> f√∂r att se artiklar och niv√•er.<br/>
                    ‚Ä¢ Anv√§nd <b>Top IN/OUT</b> i Dashboard f√∂r perioder (7/30/90).
                  </div>
                </div>
              </div>

            </div>

            <footer>
              Baseline ‚Ä¢ UI-only ‚Ä¢ localStorage-first ‚Ä¢ fail-closed
            </footer>
          </section>

          <!-- SALDO -->
          <section id="viewSaldo" class="panel" role="tabpanel" aria-labelledby="tabSaldo" hidden>
            <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-bottom:10px;">
              <h2 style="margin:0;">Lagersaldo</h2>
              <div class="spacer"></div>
              <div class="pill">
                <span class="muted">Artiklar:</span>
                <b id="frzSaldoCount">0</b>
              </div>
            </div>

            <div id="frzSaldoTableWrap" class="panel flat" style="background: var(--card2);"></div>
          </section>

          <!-- HISTORIK -->
          <section id="viewHistorik" class="panel" role="tabpanel" aria-labelledby="tabHistorik" hidden>
            <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-bottom:10px;">
              <h2 style="margin:0;">Historik</h2>
              <div class="spacer"></div>
              <div class="pill">
                <span class="muted">H√§ndelser:</span>
                <b id="frzHistoryCount">0</b>
              </div>
            </div>

            <div id="frzHistoryList" class="panel flat" style="background: var(--card2);"></div>
          </section>

        </div>
      </main>
    </section>
  </div>

  <!-- Legacy users modal (styrd av admin/freezer.js) -->
  <div id="frzUserModalOverlay" class="modalOverlay" hidden aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="frzUserModalTitle">
      <div class="modalHead">
        <h3 id="frzUserModalTitle" class="modalTitle">Skapa anv√§ndare</h3>
        <div class="spacer"></div>
        <button id="frzUserModalCloseBtn" class="iconBtn" type="button" title="St√§ng (Esc)">St√§ng</button>
      </div>

      <div class="modalBody">
        <div id="frzUsersMsg" class="panel warn flat" hidden>
          <b id="frzUsersMsgTitle">Fel</b>
          <div class="muted" id="frzUsersMsgText">‚Äî</div>
        </div>

        <div class="panel flat" style="background: var(--card2);">
          <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-bottom:10px;">
            <b id="frzUserFormTitle">Skapa anv√§ndare</b>
            <div class="spacer"></div>
            <span class="muted" id="frzUserFormMode">‚Äî</span>
          </div>

          <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-bottom:10px;">
            <label class="pill" for="frzUserFirstName">
              <span class="muted">F√∂rnamn:</span>
              <input id="frzUserFirstName" type="text" placeholder="t.ex. Anna" maxlength="32" />
            </label>
          </div>

          <div style="display:flex; gap:12px; flex-wrap:wrap;" aria-label="Beh√∂righeter">
            <label style="display:flex; gap:6px; align-items:center; font-size:13px;">
              <input id="perm_users_manage" type="checkbox" /> users_manage
            </label>
            <label style="display:flex; gap:6px; align-items:center; font-size:13px;">
              <input id="perm_inventory_write" type="checkbox" /> inventory_write
            </label>
            <label style="display:flex; gap:6px; align-items:center; font-size:13px;">
              <input id="perm_history_write" type="checkbox" /> history_write
            </label>
            <label style="display:flex; gap:6px; align-items:center; font-size:13px;">
              <input id="perm_dashboard_view" type="checkbox" checked /> dashboard_view
            </label>
          </div>

          <input id="frzUserEditingId" type="hidden" value="" />
          <div class="srOnly" aria-live="polite" id="frzUserModalLive">‚Äî</div>
        </div>
      </div>

      <div class="modalFoot">
        <button id="frzUserCancelBtn" class="btn" type="button">Avbryt</button>
        <button id="frzUserSaveBtn" class="btn" type="button">Spara</button>
      </div>
    </div>
  </div>

  <!-- Scripts (beh√•ll ordning) -->
  <script src="../UI/pages/freezer/02-core.js"></script>
  <script src="../UI/pages/freezer/04-contract.js"></script>
  <script src="../UI/pages/freezer/03-store.js"></script>

  <script src="../UI/freezer-render.js"></script>
  <script src="../UI/freezer-dashboard.js"></script>

  <script src="../UI/pages/freezer/05-modal-shell.js"></script>

  <script type="module" src="../UI/pages/freezer/00-view-interface.js"></script>
  <script type="module" src="../UI/pages/freezer/01-view-registry.js"></script>

  <script type="module" src="../UI/pages/freezer/admin/admin-dashboard.js"></script>
  <script type="module" src="../UI/pages/freezer/admin/admin-items.js"></script>

  <script src="./freezer.js"></script>

  <!-- Minimal UI glue: sidomeny -> befintliga tabs -->
  <script>
    (function(){
      "use strict";
      function byId(id){ return document.getElementById(id); }
      function setCurrent(btn){
        try{
          document.querySelectorAll("[data-frz-tab]").forEach(function(b){
            b.removeAttribute("aria-current");
          });
          btn.setAttribute("aria-current", "page");
        }catch{}
      }
      function clickTab(key){
        var map = { dashboard: "tabDashboard", saldo: "tabSaldo", history: "tabHistorik" };
        var id = map[String(key||"")] || "";
        var el = id ? byId(id) : null;
        if (el && typeof el.click === "function") el.click();
      }

      document.querySelectorAll("[data-frz-tab]").forEach(function(btn){
        btn.addEventListener("click", function(){
          var key = btn.getAttribute("data-frz-tab");
          setCurrent(btn);
          clickTab(key);
        });
      });
    })();
  </script>

  <!-- √ÑNDRINGSLOGG (‚â§8)
  1) Ny modern layout (sidomeny + topbar + kort) men beh√•ller alla kritiska DOM-id/hookar.
  2) P0 fix kvar: .modalOverlay[hidden]{display:none !important;} s√• modal aldrig l√•ser sidan.
  3) Tabs + view-sektioner kvar exakt (tabDashboard/tabSaldo/tabHistorik + viewDashboard/viewSaldo/viewHistorik).
  4) Router hooks kvar: freezerViewMenu + freezerViewRoot.
  -->
</body>
</html>
